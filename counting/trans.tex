\section{转化思想}

\subsection{「平方」到「选两个」}
\paragraph{题面}
对于$1\ldots n$，你需要将其划分为若干段。并且有$m$个限制，其
中第$i$个$X_i$的含义是$X_i$和$X_i+1$不能划分在同一段里。\par
我们称一种方案的权值为所有段长度的平方的积，求所有合法划分方
案的权值。
\paragraph{解析}
一个段长度的平方是一个很毒瘤的东西。但是注意到我们可以把这个东
西转化为在该段放两个不一样的球（可以放到一块）的方案数，因此搞
成了一个很通常的DP……接下来的话矩乘优化一下就好了。\par
顺便注意一下在隔断的地方不能拆段，所以有两种转移方程。

\subsection{「走格点」和「组合数」}
\paragraph{题面}
你有$n$个串，第$i$个串上有$A_i$块肉和$B_i$块菜。现在选出两个串
，将他们中的肉和菜放在一起重新排列，求总方案数。\par
$2\leq n\leq 200000, 1\leq A_i,B_i\leq 2000$。
\paragraph{题解}
很显然对于两个串$i, j$，对答案的贡献是：
\[\binom{A_i + B_i + A_j + B_j}{A_i + A_j}\]\par
这个东西有什么组合意义吗？答案是有的。就是在一个平面上从原点走到
$(A_i + A_j, B_i + B_j)$，每次只向上或者向右走一格的方案数，然后
我们把整个坐标系平移一下就可以把这个东西变成从$(-A_i, -B_i)$走到
$(A_j, B_j)$。\par
然后我们建出所有的点，就是要我们求所有正点走到所有负点的方案数之
和。这个东西很好DP，我们先把横纵坐标都加2000，然后根据到$(0, 0)$
的曼哈顿距离从小到大递推即可。

